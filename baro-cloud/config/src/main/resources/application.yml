server:
  port: 8888 # [1] README 기준 Config Server 고정 포트(다른 서비스가 부트 단계에서 찾기 쉽게 고정)

spring:
  application:
    name: config-server # [2] 설정 조회 URL과 Eureka 서비스 ID에 사용
  profiles:
    # 기본값은 git (프로덕션용)
    # 로컬 개발 시에는 local 프로파일 사용 (application-local.yml)
    # native 모드 사용 시: active: native 과 함께 spring.cloud.config.server.native.search-locations 설정
    active: git
  cloud:
    config:
      server:
        git:
          # Git 저장소 URL (환경 변수로 오버라이드 가능)
          uri: ${CONFIG_GIT_URI:https://github.com/prgrms-be-adv-devcourse/beadv2_2_dogs_BE}
          # 기본 브랜치
          default-label: ${CONFIG_GIT_BRANCH:main}
          # Git 저장소 클론 디렉토리
          basedir: /tmp/config-repo
          # 강제 Pull (항상 최신 버전 가져오기)
          force-pull: true
          # 시작 시 클론 (성능 향상을 위해 false 권장)
          clone-on-start: false
          # Git 저장소 검색 경로
          # 각 모듈 디렉토리의 src/main/resources/에서 설정 파일을 찾음
          search-paths:
            - '**/src/main/resources'

eureka:
  client:
    service-url:
      # Docker 환경에서는 서비스 이름(eureka) 사용, 로컬에서는 localhost 사용
      # 환경 변수 EUREKA_CLIENT_SERVICEURL_DEFAULTZONE으로 오버라이드 가능
      defaultZone: ${EUREKA_CLIENT_SERVICEURL_DEFAULTZONE:http://eureka:8761/eureka/}
  instance:
    prefer-ip-address: true # [6] 호스트명 대신 IP 노출로 DNS 미설정 환경에서 연결 실패 방지

# [footnotes]
# [1] Config Server는 게이트웨이/마이크로서비스보다 먼저 기동해야 설정 부트스트랩 오류를 막을 수 있다.
# [3] 운영/테스트 환경에서는 spring.profiles.active=git 과 함께 spring.cloud.config.server.git.* 설정을 추가해 중앙 Git 저장소를 사용한다.

# Actuator 설정 (Git 정보 노출)
management:
  endpoints:
    web:
      exposure:
        include: info,health,env
  info:
    git:
      enabled: true
      mode: full
    env:
      enabled: true


